{"ast":null,"code":"import _objectWithoutProperties from \"/home/auror/Documents/Web-2/projeto-web/projeto-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/auror/Documents/Web-2/projeto-web/projeto-app/src/routes/Route.js\";\nimport React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { isAuthenticated, userLocal, isTokenExpired, logout } from \"../services/auth\";\nimport Navigation from \"../components/Navigation\";\nexport default function RouteWrapper(_ref) {\n  let Component = _ref.component,\n      _ref$isPrivate = _ref.isPrivate,\n      isPrivate = _ref$isPrivate === void 0 ? false : _ref$isPrivate,\n      _ref$isAdmin = _ref.isAdmin,\n      isAdmin = _ref$isAdmin === void 0 ? false : _ref$isAdmin,\n      rest = _objectWithoutProperties(_ref, [\"component\", \"isPrivate\", \"isAdmin\"]);\n\n  // const signed = !!localStorage.getItem('@CESTA/token');\n  console.log(\"expired\", isTokenExpired());\n\n  if (!isAuthenticated() && isPrivate) {\n    return React.createElement(Redirect, {\n      to: \"/signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    });\n  }\n\n  if (isTokenExpired()) {\n    logout();\n    return React.createElement(Redirect, {\n      to: \"/signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    });\n  }\n\n  if (isAuthenticated() && !isPrivate) {\n    return React.createElement(Redirect, {\n      to: \"/admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    });\n  } // verifica se é admin\n\n\n  if (isAuthenticated() && isPrivate && isAdmin && !userLocal().isAdmin) {\n    return React.createElement(Redirect, {\n      to: \"/admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(React.Fragment, null, isPrivate && React.createElement(Navigation, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(Route, Object.assign({}, rest, {\n    component: Component,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/home/auror/Documents/Web-2/projeto-web/projeto-app/src/routes/Route.js"],"names":["React","Route","Redirect","isAuthenticated","userLocal","isTokenExpired","logout","Navigation","RouteWrapper","Component","component","isPrivate","isAdmin","rest","console","log"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AAEA,SACEC,eADF,EAEEC,SAFF,EAGEC,cAHF,EAIEC,MAJF,QAKO,kBALP;AAOA,OAAOC,UAAP,MAAuB,0BAAvB;AAEA,eAAe,SAASC,YAAT,OAKZ;AAAA,MAJUC,SAIV,QAJDC,SAIC;AAAA,4BAHDC,SAGC;AAAA,MAHDA,SAGC,+BAHW,KAGX;AAAA,0BAFDC,OAEC;AAAA,MAFDA,OAEC,6BAFS,KAET;AAAA,MADEC,IACF;;AACD;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBV,cAAc,EAArC;;AAEA,MAAI,CAACF,eAAe,EAAhB,IAAsBQ,SAA1B,EAAqC;AACnC,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAIN,cAAc,EAAlB,EAAsB;AACpBC,IAAAA,MAAM;AACN,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAIH,eAAe,MAAM,CAACQ,SAA1B,EAAqC;AACnC,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD,GAfA,CAgBD;;;AACA,MAAIR,eAAe,MAAMQ,SAArB,IAAkCC,OAAlC,IAA6C,CAACR,SAAS,GAAGQ,OAA9D,EAAuE;AACrE,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,SACE,0CACGD,SAAS,IAAI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADhB,EAEE,oBAAC,KAAD,oBAAWE,IAAX;AAAiB,IAAA,SAAS,EAAEJ,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFF,CADF;AAMD","sourcesContent":["import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nimport {\n  isAuthenticated,\n  userLocal,\n  isTokenExpired,\n  logout\n} from \"../services/auth\";\n\nimport Navigation from \"../components/Navigation\";\n\nexport default function RouteWrapper({\n  component: Component,\n  isPrivate = false,\n  isAdmin = false,\n  ...rest\n}) {\n  // const signed = !!localStorage.getItem('@CESTA/token');\n  console.log(\"expired\", isTokenExpired());\n\n  if (!isAuthenticated() && isPrivate) {\n    return <Redirect to=\"/signin\" />;\n  }\n\n  if (isTokenExpired()) {\n    logout();\n    return <Redirect to=\"/signin\" />;\n  }\n\n  if (isAuthenticated() && !isPrivate) {\n    return <Redirect to=\"/admin\" />;\n  }\n  // verifica se é admin\n  if (isAuthenticated() && isPrivate && isAdmin && !userLocal().isAdmin) {\n    return <Redirect to=\"/admin\" />;\n  }\n\n  return (\n    <>\n      {isPrivate && <Navigation />}\n      <Route {...rest} component={Component} />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}